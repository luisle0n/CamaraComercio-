{% extends "master.html" %}
{% block title %}Inicio Socio{% endblock %}
{% block content %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col-md-8 offset-md-2">
            <div class="dashboard-card p-3">
                <h3>Buscar Socio por Cédula</h3>
                <form method="get" action="{% url 'buscar_socio_cedula' %}" class="row g-2 align-items-center">
                    <div class="col-auto">
                        <input type="text" name="cedula" class="form-control" placeholder="Ingrese la cédula" required maxlength="13">
                    </div>
                    <div class="col-auto">
                        <button type="submit" class="btn btn-primary">Buscar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <h2 class="mb-4">
        Bienvenido,
        {% if user.nombre %}
            {{ user.nombre }}
        {% elif user.first_name %}
            {{ user.first_name }}
        {% else %}
            {{ user.username }}
        {% endif %}
    </h2>
    {% if user.debe_cambiar_contrasena %}
        <div class="alert alert-warning text-center">
            Es tu primer ingreso. Debes cambiar tu contraseña para continuar.
            <a href="{% url 'cambio_obligatorio_contrasena' %}" class="btn btn-danger btn-sm ms-2">Cambiar contraseña</a>
        </div>
    {% endif %}
    <div class="row">
        <div class="col-md-6">
            <div class="dashboard-card mb-4">
                <h3>Mis Reservas</h3>
                <p>Consulta y gestiona tus reservas de servicios.</p>
                <a href="{% url 'historial_reservas' %}" class="btn btn-warning mt-2">Ver historial</a>
            </div>
        </div>
        <div class="col-md-6">
            <div class="dashboard-card mb-4 position-relative">
                <h3>Notificaciones</h3>
                <p>Revisa tus notificaciones y mensajes importantes.</p>
                <a href="{% url 'notificaciones' %}" class="btn btn-warning mt-2">Ver notificaciones</a>
                {% if notificaciones and notificaciones|length > 0 %}
                    <span style="position:absolute;top:18px;right:18px;width:14px;height:14px;background:#dc3545;border-radius:50%;display:inline-block;border:2px solid #fff;"></span>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="dashboard-card mb-4">
                <h3>Registro Comercio</h3>
                <p>Registre su comercio.</p>
                <a href="{% url 'registro_empresa' %}" class="btn btn-warning mt-2">Registro Comercio</a>
            </div>
        </div>
        <div class="col-md-6">
            <div class="dashboard-card mb-4">
                <h3>Mis Empresas</h3>
                <p>Consulta y gestiona las empresas que tienes registradas.</p>
                <a href="{% url 'mis_empresas' %}" class="btn btn-warning mt-2">Ver mis empresas</a>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="dashboard-card mb-4">
                <h3>Solicitar Seguro de Vida</h3>
                <p>Completa el formulario para solicitar tu seguro de vida.</p>
                <a href="{% url 'solicitar_seguro_vida' %}" class="btn btn-warning mt-2">Solicitar seguro de vida</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
